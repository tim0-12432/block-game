{"version":3,"sources":["components/options/Options.module.scss","components/manual/Manual.module.scss","components/game/Scene.ts","components/game/Camera.ts","components/manual/Manual.tsx","components/options/Options.tsx","App.tsx","storage.ts","i18n/config.ts","i18n/locales/en.ts","i18n/locales/de.ts","i18n/locales/es.ts","i18n/locales/it.ts","index.tsx","App.module.scss"],"names":["module","exports","camera","scene","world","renderer","stack","overhangs","gameStarted","count","addLayer","x","z","width","depth","direction","layer","generateBox","y","length","falls","push","geometry","THREE","color","material","mesh","position","set","add","shape","CANNON","boxHeight","mass","body","addBody","threejs","cannonjs","animation","speed","topLayer","element","document","querySelector","innerHTML","toString","renderCount","step","forEach","copy","quaternion","render","startGame","previousLayer","delta","overhanging","Math","abs","size","overlap","newWidth","newDepth","scale","shapes","addShape","cutBox","overhangingShift","sign","overhang","addOverhanging","setAnimationLoop","window","removeEventListener","gameOverScreen","getElementById","style","display","gameOver","Scene","gravity","broadphase","solver","iterations","ambientLight","directionalLight","height","innerHeight","innerWidth","Camera","lookAt","antialias","alpha","setSize","rootElement","appendChild","domElement","addEventListener","e","code","console","log","Manual","t","useTranslation","className","styles","manual","Options","options","setOptions","useState","open","setOpen","toggleOption","key","onClick","border","Object","keys","map","on","off","App","OPTION_KEY","dev","reloadPage","location","reload","saveOptions","value","localStorage","setItem","JSON","stringify","getOptions","stored","getItem","failed","parse","useEffect","a","setDefaultSettings","id","app","i18n","use","detector","initReactI18next","init","fallbackLng","keySeparator","ns","defaultNS","debug","resources","en","translation","de","es","it","ReactDOM","StrictMode"],"mappings":"kGACAA,EAAOC,QAAU,CAAC,QAAU,yBAAyB,IAAM,qBAAqB,GAAK,oBAAoB,SAAW,4B,mBCApHD,EAAOC,QAAU,CAAC,OAAS,yB,2CCQvBC,EAAsBC,EAAoBC,EAAqBC,E,sGAF7DC,EAAe,GACfC,EAAmB,GAErBC,GAAc,EACdC,EAAQ,EAEZ,SAASC,EAAT,GAAgE,IAA7CC,EAA4C,EAA5CA,EAAGC,EAAyC,EAAzCA,EAAGC,EAAsC,EAAtCA,MAAOC,EAA+B,EAA/BA,MAAOC,EAAwB,EAAxBA,UAGhCC,EAAQC,EAAY,CAACN,IAAGO,EAVb,EAQKZ,EAAMa,OAEKP,IAAGC,QAAOC,QAAOM,OAAO,IACzDJ,EAAMD,UAAYA,EAElBT,EAAMe,KAAKL,GAUL,SAASC,EAAT,GAAqE,IAA/CN,EAA8C,EAA9CA,EAAGO,EAA2C,EAA3CA,EAAGN,EAAwC,EAAxCA,EAAGC,EAAqC,EAArCA,MAAOC,EAA8B,EAA9BA,MAAOM,EAAuB,EAAvBA,MAC7CE,EAAW,IAAIC,IAAkBV,EAxBtB,EAwBwCC,GAEnDU,EAAQ,IAAID,IAAJ,cAAuB,GAAoB,EAAfjB,EAAMa,OAAlC,iBACRM,EAAW,IAAIF,IAA0B,CAAEC,MAAOA,IAClDE,EAAO,IAAIH,IAAWD,EAAUG,GACtCC,EAAKC,SAASC,IAAIjB,EAAGO,EAAGN,GACxBT,EAAM0B,IAAIH,GAEV,IAAMI,EAAQ,IAAIC,MACjB,IAAIA,OAAYlB,EAAQ,EAAGmB,GAAelB,EAAQ,IAE7CmB,EAAOb,EAAQ,EAAI,EACnBc,EAAO,IAAIH,OAAY,CAAEE,OAAMH,UACrCI,EAAKP,SAASC,IAAIjB,EAAGO,EAAGN,GACxBR,EAAM+B,QAAQD,GAId,MAAO,CACNE,QAASV,EACTW,SAAUH,EACVrB,QACAC,QACAC,UAPiB,KAmCnB,SAASuB,IACR,IAAMC,EAAQ,IACd9B,EAAQH,EAAMa,OAAS,EAEvB,IAAMqB,EAAWlC,EAAMA,EAAMa,OAAS,GACtCqB,EAASJ,QAAQT,SAASa,EAASzB,YAAcwB,EACjDC,EAASH,SAASV,SAASa,EAASzB,YAAcwB,EAqBnD,WACC,IAAME,EAAUC,SAASC,cAAc,UACvCF,IAAUA,EAAQG,UAAYnC,EAAMoC,YArBpCC,GAEI5C,EAAOyB,SAAST,EArFH,GAqFoBZ,EAAMa,OAAS,GAAK,IACxDjB,EAAOyB,SAAST,GAAKqB,GAQtBnC,EAAM2C,KAAK,EAAI,IAEfxC,EAAUyC,SAAQ,SAACP,GAClBA,EAAQL,QAAQT,SAASsB,KAAKR,EAAQJ,SAASV,UAC/Cc,EAAQL,QAAQc,WAAWD,KAAKR,EAAQJ,SAASa,eARlD7C,EAAS8C,OAAOhD,EAAOD,GA6BxB,SAASkD,IACR,GAAI5C,EAGG,CACN,IAAMgC,EAAWlC,EAAMA,EAAMa,OAAS,GAChCkC,EAAgB/C,EAAMA,EAAMa,OAAS,GACrCJ,EAAYyB,EAASzB,UAErBuC,EAAQd,EAASJ,QAAQT,SAASZ,GAAasC,EAAcjB,QAAQT,SAASZ,GAC9EwC,EAAcC,KAAKC,IAAIH,GACvBI,EAAoB,KAAb3C,EAAmByB,EAAS3B,MAAQ2B,EAAS1B,MACpD6C,EAAUD,EAAOH,EAEvB,GAAII,EAAU,EAAG,CAChB,MAnFI,YAAkE,IAAjDnB,EAAgD,EAAhDA,SAAUmB,EAAsC,EAAtCA,QAASD,EAA6B,EAA7BA,KAAMJ,EAAuB,EAAvBA,MAC1CvC,EAAYyB,EAASzB,UACrB6C,EAAwB,KAAb7C,EAAmB4C,EAAUnB,EAAS3B,MACjDgD,EAAwB,KAAb9C,EAAmB4C,EAAUnB,EAAS1B,MAEvD0B,EAAS3B,MAAQ+C,EACjBpB,EAAS1B,MAAQ+C,EAEjBrB,EAASJ,QAAQ0B,MAAM/C,GAAa4C,EAAUD,EAC9ClB,EAASJ,QAAQT,SAASZ,IAAcuC,EAAQ,EAChDd,EAASH,SAASV,SAASZ,IAAcuC,EAAQ,EAEjD,IAAMxB,EAAQ,IAAIC,MACjB,IAAIA,OAAY6B,EAAW,EAAG5B,GAAe6B,EAAW,IAKzD,OAHArB,EAASH,SAAS0B,OAAS,GAC3BvB,EAASH,SAAS2B,SAASlC,GAEpB,CACN8B,SAAUA,EACVC,SAAUA,GA+DoBI,CAAO,CAACzB,WAAUmB,UAASD,OAAMJ,UAAvDM,EAAP,EAAOA,SAAUC,EAAjB,EAAiBA,SAEXK,GAAoBP,EAAU,EAAIJ,EAAc,GAAKC,KAAKW,KAAKb,IAxHxE,YAA8D,IAArC3C,EAAoC,EAApCA,EAAGC,EAAiC,EAAjCA,EAAGC,EAA8B,EAA9BA,MAAOC,EAAuB,EAAvBA,MAG/BsD,EAAWnD,EAAY,CAACN,IAAGO,EAnBhB,GAiBMZ,EAAMa,OAAS,GAEFP,IAAGC,QAAOC,QAAOM,OAAO,IAC5Db,EAAUc,KAAK+C,GA8HbC,CAAe,CAAE1D,EATiB,KAAbI,EAClByB,EAASJ,QAAQT,SAAShB,EAAIuD,EAC9B1B,EAASJ,QAAQT,SAAShB,EAOKC,EANA,KAAbG,EAClByB,EAASJ,QAAQT,SAASf,EAAIsD,EAC9B1B,EAASJ,QAAQT,SAASf,EAIsBC,MAHhB,KAAbE,EAAmBwC,EAAcK,EAGkB9C,MAFtC,KAAbC,EAAmBwC,EAAcM,IAQvDnD,EAAS,CAAEC,EAJgB,KAAbI,EAAmByB,EAASJ,QAAQT,SAAShB,GAAK,GAI3CC,EAHM,KAAbG,EAAmByB,EAASJ,QAAQT,SAASf,GAAK,GAGjCC,MAAO+C,EAAU9C,MAAO+C,EAAU9C,UAF9B,KAAbA,EAAmB,IAAM,WA3ClD,WACCV,EAASiE,iBAAiB,MAC1BC,OAAOC,oBAAoB,SAAS,kBAAMpB,OAE1C,IAAMX,EAAUC,SAASC,cAAc,aACvCF,IAAUA,EAAQG,UAAYnC,EAAMoC,YACpC,IAAM4B,EAAiB/B,SAASgC,eAAe,kBAC3CD,GACHA,EAAeE,QAAQF,EAAeE,MAAMC,QAAU,QAuCrDC,QAjCDxE,EAASiE,iBAAiBhC,GAC1B9B,GAAc,EAqChB,IAyCesE,EAzCD,YACb1E,EAAQ,IAAI2B,SACNgD,QAAQnD,IAAI,GAAI,GAAI,GAC1BxB,EAAM4E,WAAa,IAAIjD,kBACvB3B,EAAM6E,OAAOC,WAAa,GAE1B/E,EAAQ,IAAIoB,IAEZb,EAAS,CAAEC,EAAG,EAAGC,EAAG,EAAGC,MAxKA,EAwKwBC,MAxKxB,EAwKgDC,UAAW,KAClFL,EAAS,CAAEC,GAAI,GAAIC,EAAG,EAAGC,MAzKF,EAyK0BC,MAzK1B,EAyKkDC,UAAW,MAEpF,IAAMoE,EAAe,IAAI5D,IAAmB,SAAU,IACtDpB,EAAM0B,IAAIsD,GAEV,IAAMC,EAAmB,IAAI7D,IAAuB,SAAU,IAC9D6D,EAAiBzD,SAASC,IAAI,GAAI,GAAI,GACtCzB,EAAM0B,IAAIuD,IAEVlF,ECrLqB,WACrB,IACMmF,EADQ,GACUd,OAAOe,YAAcf,OAAOgB,WAIpD,OAAO,IAAIhE,KACVV,EACAA,EACAwE,EAAS,EACTA,GAAU,EAPE,EACD,KDiLHG,IACF7D,SAASC,IAAI,EAAG,EAAG,GAC1B1B,EAAOuF,OAAO,EAAG,EAAG,IAEpBpF,EAAW,IAAIkB,IAAoB,CAAEmE,WAAW,EAAMC,OAAO,KACpDC,QAAQrB,OAAOgB,WAAYhB,OAAOe,aAC3CjF,EAAS8C,OAAOhD,EAAOD,GAEvB,IAAM2F,EAAcnD,SAASgC,eAAe,QAC5CmB,GAAcA,EAAYC,YAAYzF,EAAS0F,YAE/CxB,OAAOyB,iBAAiB,SAAS,kBAAM5C,OACvCmB,OAAOyB,iBAAiB,SAAS,SAACC,GACjC,OAAQA,EAAEC,MACV,IAAK,QACL,IAAK,QACJ9C,IACA,MACD,QACC+C,QAAQC,IAAIH,EAAEC,W,gCEzLFG,EAXI,WAClB,IAAQC,EAAMC,cAAND,EAER,OACC,sBAAKE,UAAYC,IAAOC,OAAxB,UACC,8BAAG,8BAAK,mBAAGF,UAAU,mBAArB,KAA8C,wCAA9C,IAAiEF,EAAE,qBAAnE,IAA0F,wCAA1F,IAA6GA,EAAE,2BAC/G,8BAAG,oCAAH,IAAkBA,EAAE,yB,gCC2BRK,EA5BY,SAAC,GAAoC,IAAlCC,EAAiC,EAAjCA,QAASC,EAAwB,EAAxBA,WACtC,EAAwBC,oBAAS,GAAjC,mBAAOC,EAAP,KAAaC,EAAb,KAEQV,EAAMC,cAAND,EAER,SAASW,EAAaC,GACrBL,EAAW,2BACPD,GADM,kBAERM,GAAON,EAAQM,MAIlB,OACC,sBAAKV,UAAYC,IAAOG,QAAxB,UACC,oBAAIO,QAAU,SAAClB,GAAD,OAAOe,GAASD,IAAQpC,MAAOoC,EAAO,CAACK,OAAQ,yBAA2B,CAACA,OAAQ,mBAAjG,SAAuHd,EAAE,uBAExHS,EACGM,OAAOC,KAAKV,GAASW,KAAI,SAACL,GAC3B,OACC,8BAAe,8BAAKZ,EAAE,oBAAD,OAAqBY,IAA3B,OAAf,IAAmEN,EAAQM,GAAO,sBAAMV,UAAYC,IAAOe,GAAKL,QAAU,SAAClB,GAAD,OAAOgB,EAAaC,IAA5D,SAAmE,mBAAGV,UAAU,0BAAkC,sBAAMA,UAAYC,IAAOgB,IAAMN,QAAU,SAAClB,GAAD,OAAOgB,EAAaC,IAA7D,SAAoE,mBAAGV,UAAU,sBAA5QU,MAGT,SC4CQQ,EAlEC,WACf,IAAMC,EAAa,4BACnB,EAA8Bb,mBAC7B,CACCc,KAAK,EACLlB,QAAQ,IAHV,mBAAOE,EAAP,KAAgBC,EAAhB,KAMQP,EAAMC,cAAND,EAcR,SAASuB,IACRtD,OAAOuD,SAASC,SAGjB,SAASC,ICrCwB,IAACd,EAAae,EAAbf,EDsCdS,ECtC2BM,EDsCfrB,ECrChCsB,aAAaC,QAAQjB,EAAKkB,KAAKC,UAAUJ,IDuCzC,SAASK,IACR,ICrCuCpB,EDqCjCqB,GCrCiCrB,EDqCJS,ECpCF,OAA9BO,aAAaM,QAAQtB,IACxBgB,aAAaC,QAAQjB,EAAKkB,KAAKC,UAAU,KAClC,CAACI,QAAQ,IAETL,KAAKM,MAAMR,aAAaM,QAAQtB,IAAQ,ODiC/C,OAAIqB,EAAOE,QACVT,IACOpB,GAEA2B,EAUT,OAnCAI,qBAAU,YACe,uCAAG,sBAAAC,EAAA,sEACpB/B,EAAWyB,KADS,OAE1BxD,IAF0B,2CAAH,qDAIxB+D,KACE,IAEHF,qBAAU,WACTX,MACE,CAACpB,IAmBJrC,OAAOyB,iBAAiB,SAAS,SAACC,GACnB,QAAVA,EAAEC,MACL2B,OAKD,qCACGjB,EAAQgB,IAAM,qBAAKkB,GAAKrC,IAAOmB,IAAjB,SACf,cAAC,IAAD,MACQ,KACT,sBAAKkB,GAAKrC,IAAOsC,IAAjB,UACC,qBAAKD,GAAG,QAAQtC,UAAYC,IAAOhG,MAAnC,eACA,sBAAKqI,GAAG,iBAAiBtC,UAAYC,IAAO5B,SAA5C,UACC,4CACA,+BAAMyB,EAAE,gCAAiC,sBAAMwC,GAAG,WAAT,eAA8BxC,EAAE,mCACzE,wBAAQa,QAAS,SAAClB,GAAD,OAAO4B,KAAxB,SAAwCvB,EAAE,oBAC1C,cAAC,EAAD,CAASM,QAAUA,EAAUC,WAAaA,UAG1CD,EAAQF,OAAS,qBAAKoC,GAAKrC,IAAOC,OAAjB,SAClB,cAAC,EAAD,MACQ,S,wBEhEZsC,IAAKC,IAAIC,KAAUD,IAAIE,KAAkBC,KAAK,CAC1CC,YAAa,KACbC,aAAc,IACdC,GAAI,CAAC,eACLC,UAAW,cACXC,OAAO,EACPC,UAAW,CACTC,GCfqB,CAC1BC,YAAa,CACZ,SAAY,CACX,cAAiB,CAChB,MAAS,eACT,MAAS,YAEV,MAAS,aACT,SAAY,WACZ,QAAW,CACV,IAAO,QACP,OAAU,SACV,QAAW,UACX,QAAW,oBAGb,OAAU,CACT,QAAW,CACV,GAAM,KACN,MAAS,mBACT,KAAQ,4BAET,QAAW,qCDNRC,GEhBqB,CAC1BD,YAAa,CACZ,SAAY,CACX,cAAiB,CAChB,MAAS,WACT,MAAS,qBAEV,MAAS,2BACT,SAAY,gBACZ,QAAW,CACV,IAAO,QACP,OAAU,YACV,QAAW,WACX,QAAW,sBAGb,OAAU,CACT,QAAW,CACV,GAAM,OACN,MAAS,+BACT,KAAQ,sCAET,QAAW,gEFLRE,GGjBqB,CAC1BF,YAAa,CACZ,SAAY,CACX,cAAiB,CAChB,MAAS,cACT,MAAS,YAEV,MAAS,qBACT,SAAY,UACZ,QAAW,CACV,IAAO,UACP,OAAU,YACV,QAAW,SACX,QAAW,sBAGb,OAAU,CACT,QAAW,CACV,GAAM,IACN,MAAS,oBACT,KAAQ,+BAET,QAAW,qDHJRG,GIlBqB,CAC1BH,YAAa,CACZ,SAAY,CACX,cAAiB,CAChB,MAAS,iBACT,MAAS,WAEV,MAAS,WACT,SAAY,eACZ,QAAW,CACV,IAAO,QACP,OAAU,aACV,QAAW,UACX,QAAW,sBAGb,OAAU,CACT,QAAW,CACV,GAAM,IACN,MAAS,4BACT,KAAQ,kCAET,QAAW,6CChBdI,IAAS7G,OACR,cAAC,IAAM8G,WAAP,UACC,cAAC,EAAD,MAEDvH,SAASgC,eAAe,U,kBCTzB1E,EAAOC,QAAU,CAAC,KAAO,kBAAkB,IAAM,iBAAiB,MAAQ,mBAAmB,SAAW,yB","file":"static/js/main.3768b696.chunk.js","sourcesContent":["// extracted by mini-css-extract-plugin\nmodule.exports = {\"options\":\"Options_options__1_QKv\",\"off\":\"Options_off__2ANuc\",\"on\":\"Options_on__259wj\",\"disabled\":\"Options_disabled__tWZ0b\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"manual\":\"Manual_manual__1qvu4\"};","import * as CANNON from \"cannon\";\nimport * as THREE from \"three\";\nimport { BoxProps, LayerProps, OverhangProps, CutProps } from \"../../types\";\nimport { Camera } from \"./Camera\";\n\nconst originalBoxSize = 3;\nconst boxHeight = 1;\nconst stack: any[] = [];\nconst overhangs: any[] = [];\nlet camera: THREE.Camera, scene: THREE.Scene, world: CANNON.World, renderer: THREE.WebGLRenderer;\nlet gameStarted = false;\nlet count = 0;\n\nfunction addLayer({x, z, width, depth, direction}: LayerProps) {\n\tconst y = boxHeight * stack.length;\n\n\tconst layer = generateBox({x, y, z, width, depth, falls: false});\n\tlayer.direction = direction;\n    \n\tstack.push(layer);\n}\n\nfunction addOverhanging({x, z, width, depth}: OverhangProps) {\n\tconst y = boxHeight * (stack.length - 1);\n\n\tconst overhang = generateBox({x, y, z, width, depth, falls: true});\n\toverhangs.push(overhang);\n}\n\nexport function generateBox({x, y, z, width, depth, falls}: BoxProps): any {\n\tconst geometry = new THREE.BoxGeometry(width, boxHeight, depth);\n\n\tconst color = new THREE.Color(`hsl(${30 + stack.length * 4}, 100%, 50%)`);\n\tconst material = new THREE.MeshLambertMaterial({ color: color });\n\tconst mesh = new THREE.Mesh(geometry, material);\n\tmesh.position.set(x, y, z);\n\tscene.add(mesh);\n\n\tconst shape = new CANNON.Box(\n\t\tnew CANNON.Vec3(width / 2, boxHeight / 2, depth / 2)\n\t);\n\tconst mass = falls ? 5 : 0;\n\tconst body = new CANNON.Body({ mass, shape });\n\tbody.position.set(x, y, z);\n\tworld.addBody(body);\n\n\tconst direction = \"x\";\n\n\treturn {\n\t\tthreejs: mesh,\n\t\tcannonjs: body,\n\t\twidth,\n\t\tdepth,\n\t\tdirection\n\t};\n}\n\nexport function cutBox({topLayer, overlap, size, delta}: CutProps): any {\n\tconst direction = topLayer.direction;\n\tconst newWidth = direction == \"x\" ? overlap : topLayer.width;\n\tconst newDepth = direction == \"z\" ? overlap : topLayer.depth;\n\n\ttopLayer.width = newWidth;\n\ttopLayer.depth = newDepth;\n\n\ttopLayer.threejs.scale[direction] = overlap / size;\n\ttopLayer.threejs.position[direction] -= delta / 2;\n\ttopLayer.cannonjs.position[direction] -= delta / 2;\n\n\tconst shape = new CANNON.Box(\n\t\tnew CANNON.Vec3(newWidth / 2, boxHeight / 2, newDepth / 2)\n\t);\n\ttopLayer.cannonjs.shapes = [];\n\ttopLayer.cannonjs.addShape(shape);\n\n\treturn {\n\t\tnewWidth: newWidth,\n\t\tnewDepth: newDepth\n\t};\n}\n\nfunction animation() {\n\tconst speed = 0.15;\n\tcount = stack.length - 1;\n\n\tconst topLayer = stack[stack.length - 1];\n\ttopLayer.threejs.position[topLayer.direction] += speed;\n\ttopLayer.cannonjs.position[topLayer.direction] += speed;\n\n\trenderCount();\n\n\tif (camera.position.y < boxHeight * (stack.length - 2) + 4) {\n\t\tcamera.position.y += speed;\n\t}\n\n\tupdatePhysics();\n\trenderer.render(scene, camera);\n}\n\nfunction updatePhysics() {\n\tworld.step(1 / 60);\n\n\toverhangs.forEach((element) => {\n\t\telement.threejs.position.copy(element.cannonjs.position);\n\t\telement.threejs.quaternion.copy(element.cannonjs.quaternion);\n\t});\n}\n\nfunction renderCount() {\n\tconst element = document.querySelector(\"#count\");\n\telement ? element.innerHTML = count.toString() : null;\n}\n\nfunction gameOver() {\n\trenderer.setAnimationLoop(null);\n\twindow.removeEventListener(\"click\", () => startGame());\n\n\tconst element = document.querySelector(\"#gm-count\");\n\telement ? element.innerHTML = count.toString() : null;\n\tconst gameOverScreen = document.getElementById(\"gameOverScreen\");\n\tif (gameOverScreen) {\n\t\tgameOverScreen.style ? gameOverScreen.style.display = \"flex\" : null;\n\t}\n}\n\nfunction startGame() {\n\tif(!gameStarted) {\n\t\trenderer.setAnimationLoop(animation);\n\t\tgameStarted = true;\n\t} else {\n\t\tconst topLayer = stack[stack.length - 1];\n\t\tconst previousLayer = stack[stack.length - 2];\n\t\tconst direction = topLayer.direction;\n\n\t\tconst delta = topLayer.threejs.position[direction] - previousLayer.threejs.position[direction];\n\t\tconst overhanging = Math.abs(delta);\n\t\tconst size = direction == \"x\" ? topLayer.width : topLayer.depth;\n\t\tconst overlap = size - overhanging;\n\n\t\tif (overlap > 0) {\n\t\t\tconst {newWidth, newDepth} = cutBox({topLayer, overlap, size, delta});\n\n\t\t\tconst overhangingShift = (overlap / 2 + overhanging / 2) * Math.sign(delta);\n\t\t\tconst overhangingX = direction == \"x\"\n\t\t\t\t? topLayer.threejs.position.x + overhangingShift\n\t\t\t\t: topLayer.threejs.position.x;\n\t\t\tconst overhangingZ = direction == \"z\"\n\t\t\t\t? topLayer.threejs.position.z + overhangingShift\n\t\t\t\t: topLayer.threejs.position.z;\n\t\t\tconst overhangWidth = direction == \"x\" ? overhanging : newWidth;\n\t\t\tconst overhangDepth = direction == \"z\" ? overhanging : newDepth;\n\n\t\t\taddOverhanging({ x: overhangingX, z: overhangingZ, width: overhangWidth, depth: overhangDepth });\n\n\t\t\tconst nextX = direction == \"x\" ? topLayer.threejs.position.x : -10;\n\t\t\tconst nextZ = direction == \"z\" ? topLayer.threejs.position.z : -10;\n\t\t\tconst nextDirection = direction == \"x\" ? \"z\" : \"x\";\n\n\t\t\taddLayer({ x: nextX, z: nextZ, width: newWidth, depth: newDepth, direction: nextDirection });\n\t\t} else {\n\t\t\tgameOver();\n\t\t}\n\t}\n}\n\nconst Scene = (): void => {\n\tworld = new CANNON.World();\n\tworld.gravity.set(0, -10, 0);\n\tworld.broadphase = new CANNON.NaiveBroadphase();\n\tworld.solver.iterations = 40;\n\n\tscene = new THREE.Scene();\n\n\taddLayer({ x: 0, z: 0, width: originalBoxSize, depth: originalBoxSize, direction: \"\" });\n\taddLayer({ x: -10, z: 0, width: originalBoxSize, depth: originalBoxSize, direction: \"x\" });\n\n\tconst ambientLight = new THREE.AmbientLight(0xffffff, .6);\n\tscene.add(ambientLight);\n\n\tconst directionalLight = new THREE.DirectionalLight(0xffffff, .6);\n\tdirectionalLight.position.set(10, 20, 0);\n\tscene.add(directionalLight);\n\n\tcamera = Camera();\n\tcamera.position.set(4, 4, 4);\n\tcamera.lookAt(0, 0, 0);\n\n\trenderer = new THREE.WebGLRenderer({ antialias: true, alpha: true });\n\trenderer.setSize(window.innerWidth, window.innerHeight);\n\trenderer.render(scene, camera);\n    \n\tconst rootElement = document.getElementById(\"root\");\n\trootElement ? rootElement.appendChild(renderer.domElement) : null;\n\n\twindow.addEventListener(\"click\", () => startGame());\n\twindow.addEventListener(\"keyup\", (e) => {\n\t\tswitch (e.code) {\n\t\tcase \"Space\":\n\t\tcase \"Enter\":\n\t\t\tstartGame();\n\t\t\tbreak;\n\t\tdefault:\n\t\t\tconsole.log(e.code);\n\t\t}\n\t});\n};\nexport default Scene;","import * as THREE from \"three\";\n\nexport const Camera = () => {\n\tconst width = 10;\n\tconst height = width + (window.innerHeight / window.innerWidth);\n\tconst near = 1;\n\tconst far = 100;\n\n\treturn new THREE.OrthographicCamera(\n\t\twidth / -2,\n\t\twidth / 2,\n\t\theight / 2,\n\t\theight / -2,\n\t\tnear,\n\t\tfar\n\t);\n};","\nimport React, { FC } from \"react\";\nimport { useTranslation } from \"react-i18next\";\n\nimport styles from \"./Manual.module.scss\";\n\nconst Manual: FC = () => {\n\tconst { t } = useTranslation();\n\n\treturn (\n\t\t<div className={ styles.manual }>\n\t\t\t<p><kbd><i className=\"fas fa-mouse\" /></kbd>, <kbd>Space</kbd> { t(\"manual.placing.or\") } <kbd>Enter</kbd> { t(\"manual.placing.part2\") }</p>\n\t\t\t<p><kbd>R</kbd> { t(\"manual.refresh\") }</p>\n\t\t</div>\n\t);\n};\n\nexport default Manual;","import React, { FC, useState } from \"react\";\nimport { useTranslation } from \"react-i18next\";\nimport { OptionsProps } from \"../../types\";\n\nimport styles from \"./Options.module.scss\";\n\ninterface Props {\n    options: OptionsProps,\n    setOptions: any\n}\n\nconst Options: FC<Props> = ({ options, setOptions }: Props) => {\n\tconst [open, setOpen] = useState(false);\n\n\tconst { t } = useTranslation();\n\n\tfunction toggleOption(key: string) {\n\t\tsetOptions({\n\t\t\t...options,\n\t\t\t[key]: !options[key]\n\t\t});\n\t}\n\n\treturn (\n\t\t<div className={ styles.options }>\n\t\t\t<h2 onClick={ (e) => setOpen(!open) } style={open ? {border: \"2px solid transparent\"} : {border: \"2px solid white\"}}>{ t(\"gameover.settings\") }</h2>\n\t\t\t{\n\t\t\t\topen\n\t\t\t\t\t? Object.keys(options).map((key) => {\n\t\t\t\t\t\treturn (\n\t\t\t\t\t\t\t<p key={ key }><b>{ t(`gameover.options.${key}` as const) }:</b> { options[key] ? <span className={ styles.on } onClick={ (e) => toggleOption(key) }><i className=\"far fa-check-square\" /></span> : <span className={ styles.off } onClick={ (e) => toggleOption(key) }><i className=\"far fa-square\" /></span> }</p>\n\t\t\t\t\t\t);\n\t\t\t\t\t})\n\t\t\t\t\t: null\n\t\t\t}\n\t\t</div>\n\t);\n};\n\nexport default Options;","import React, { useEffect, useState, FC } from \"react\";\nimport { FPSStats } from \"fps-react\";\n\nimport styles from \"./App.module.scss\";\nimport Scene from \"./components/game/Scene\";\nimport Manual from \"./components/manual/Manual\";\nimport Options from \"./components/options/Options\";\nimport { OptionsProps } from \"./types\";\nimport { useTranslation } from \"react-i18next\";\nimport { getFromLocalStorage, saveToLocalStorage } from \"./storage\";\n\nconst App: FC = () => {\n\tconst OPTION_KEY = \"little-block-game.options\";\n\tconst [options, setOptions] = useState<OptionsProps>(\n\t\t{\n\t\t\tdev: false,\n\t\t\tmanual: false\n\t\t}\n\t);\n\tconst { t } = useTranslation();\n\n\tuseEffect(() => {\n\t\tconst setDefaultSettings = async () => {\n\t\t\tawait setOptions(getOptions());\n\t\t\tScene();\n\t\t};\n\t\tsetDefaultSettings();\n\t}, []);\n\n\tuseEffect(() => {\n\t\tsaveOptions();\n\t}, [options]);\n\n\tfunction reloadPage() {\n\t\twindow.location.reload();\n\t}\n\n\tfunction saveOptions() {\n\t\tsaveToLocalStorage(OPTION_KEY, options);\n\t}\n\tfunction getOptions() {\n\t\tconst stored = getFromLocalStorage(OPTION_KEY);\n\t\tif (stored.failed) {\n\t\t\tsaveOptions();\n\t\t\treturn options;\n\t\t} else {\n\t\t\treturn stored;\n\t\t}\n\t}\n\n\twindow.addEventListener(\"keyup\", (e) => {\n\t\tif (e.code == \"KeyR\") {\n\t\t\treloadPage();\n\t\t}\n\t});\n\n\treturn (\n\t\t<>\n\t\t\t{ options.dev ? <div id={ styles.dev }>\n\t\t\t\t<FPSStats />\n\t\t\t</div> : null }\n\t\t\t<div id={ styles.app }>\n\t\t\t\t<div id=\"count\" className={ styles.count }>0</div>\n\t\t\t\t<div id=\"gameOverScreen\" className={ styles.gameOver }>\n\t\t\t\t\t<h1>Game Over!</h1>\n\t\t\t\t\t<h2>{ t(\"gameover.reachedPoints.part1\") }<span id=\"gm-count\">0</span>{ t(\"gameover.reachedPoints.part2\") }</h2>\n\t\t\t\t\t<button onClick={(e) => reloadPage()}>{ t(\"gameover.again\") }</button>\n\t\t\t\t\t<Options options={ options } setOptions={ setOptions } />\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t\t{ options.manual ? <div id={ styles.manual }>\n\t\t\t\t<Manual />\n\t\t\t</div> : null }\n\t\t</>\n\t);\n};\n\nexport default App;\n","export const saveToLocalStorage = (key: string, value: any) => {\n\tlocalStorage.setItem(key, JSON.stringify(value));\n};\n\nexport const getFromLocalStorage: any = (key: string) => {\n\tif (localStorage.getItem(key) === null) {\n\t\tlocalStorage.setItem(key, JSON.stringify({}));\n\t\treturn {failed: true};\n\t} else {\n\t\treturn JSON.parse(localStorage.getItem(key) || \"{}\");\n\t}\n};","import i18n from \"i18next\";\nimport { initReactI18next } from \"react-i18next\";\nimport detector from \"i18next-browser-languagedetector\";\nimport { resourcesDE } from \"./locales/de\";\nimport { resourcesEN } from \"./locales/en\";\nimport { resourcesES } from \"./locales/es\";\nimport { resourcesIT } from \"./locales/it\";\n\ni18n.use(detector).use(initReactI18next).init({\n    fallbackLng: \"en\",\n    keySeparator: \".\",\n    ns: [\"translation\"],\n    defaultNS: \"translation\",\n    debug: false,\n    resources: {\n      en: resourcesEN,\n      de: resourcesDE,\n      es: resourcesES,\n      it: resourcesIT\n    }\n});","export const resourcesEN = {\n\ttranslation: {\n\t\t\"gameover\": {\n\t\t\t\"reachedPoints\": {\n\t\t\t\t\"part1\": \"You reached \",\n\t\t\t\t\"part2\": \" Points!\"\n\t\t\t},\n\t\t\t\"again\": \"Try again!\",\n\t\t\t\"settings\": \"Settings\",\n\t\t\t\"options\": {\n\t\t\t\t\"dev\": \"Debug\",\n\t\t\t\t\"manual\": \"Manual\",\n\t\t\t\t\"english\": \"English\",\n\t\t\t\t\"faceCon\": \"Facecam Control\"\n\t\t\t}\n\t\t},\n\t\t\"manual\": {\n\t\t\t\"placing\": {\n\t\t\t\t\"or\": \"or\",\n\t\t\t\t\"part2\": \"to place a block\",\n\t\t\t\t\"face\": \"or just open your mouth!\"\n\t\t\t},\n\t\t\t\"refresh\": \"to try again or reload the page\"\n\t\t}\n\t}\n};","export const resourcesDE = {\n\ttranslation: {\n\t\t\"gameover\": {\n\t\t\t\"reachedPoints\": {\n\t\t\t\t\"part1\": \"Du hast \",\n\t\t\t\t\"part2\": \" Punkte erreicht!\"\n\t\t\t},\n\t\t\t\"again\": \"Versuche es noch einmal!\",\n\t\t\t\"settings\": \"Einstellungen\",\n\t\t\t\"options\": {\n\t\t\t\t\"dev\": \"Debug\",\n\t\t\t\t\"manual\": \"Anleitung\",\n\t\t\t\t\"english\": \"Englisch\",\n\t\t\t\t\"faceCon\": \"Facecam Steuerung\"\n\t\t\t}\n\t\t},\n\t\t\"manual\": {\n\t\t\t\"placing\": {\n\t\t\t\t\"or\": \"oder\",\n\t\t\t\t\"part2\": \"um einen Block zu platzieren\",\n\t\t\t\t\"face\": \"oder Ã¶ffne einfach deinen Mund!\"\n\t\t\t},\n\t\t\t\"refresh\": \"um es noch einmal zu versuchen oder die Seite neu zu laden\"\n\t\t}\n\t}\n};","export const resourcesES = {\n\ttranslation: {\n\t\t\"gameover\": {\n\t\t\t\"reachedPoints\": {\n\t\t\t\t\"part1\": \"Alcanzaste \",\n\t\t\t\t\"part2\": \" puntos!\"\n\t\t\t},\n\t\t\t\"again\": \"Intentar otra vez!\",\n\t\t\t\"settings\": \"Ajustes\",\n\t\t\t\"options\": {\n\t\t\t\t\"dev\": \"Depurar\",\n\t\t\t\t\"manual\": \"El Manual\",\n\t\t\t\t\"english\": \"Ingles\",\n\t\t\t\t\"faceCon\": \"Facecam controlar\"\n\t\t\t}\n\t\t},\n\t\t\"manual\": {\n\t\t\t\"placing\": {\n\t\t\t\t\"or\": \"o\",\n\t\t\t\t\"part2\": \"colocar un bloque\",\n\t\t\t\t\"face\": \"o simplemente abre la boca!\"\n\t\t\t},\n\t\t\t\"refresh\": \"para volver a intentarlo o actualizar la pagina\"\n\t\t}\n\t}\n};","export const resourcesIT = {\n\ttranslation: {\n\t\t\"gameover\": {\n\t\t\t\"reachedPoints\": {\n\t\t\t\t\"part1\": \"Hai raggiunto \",\n\t\t\t\t\"part2\": \" punti!\"\n\t\t\t},\n\t\t\t\"again\": \"Riprova!\",\n\t\t\t\"settings\": \"Impostazioni\",\n\t\t\t\"options\": {\n\t\t\t\t\"dev\": \"Debug\",\n\t\t\t\t\"manual\": \"Il manuale\",\n\t\t\t\t\"english\": \"Inglese\",\n\t\t\t\t\"faceCon\": \"Facecam controllo\"\n\t\t\t}\n\t\t},\n\t\t\"manual\": {\n\t\t\t\"placing\": {\n\t\t\t\t\"or\": \"o\",\n\t\t\t\t\"part2\": \"per posizionare un blocco\",\n\t\t\t\t\"face\": \"o semplicemente apri la bocca!\"\n\t\t\t},\n\t\t\t\"refresh\": \"per riprovare o aggiornare la pagina\"\n\t\t}\n\t}\n};","import React from \"react\";\nimport ReactDOM from \"react-dom\";\nimport App from \"./App\";\n\nimport \"./i18n/config\";\n\nReactDOM.render(\n\t<React.StrictMode>\n\t\t<App />\n\t</React.StrictMode>,\n\tdocument.getElementById(\"root\")\n);","// extracted by mini-css-extract-plugin\nmodule.exports = {\"root\":\"App_root__2CSG3\",\"app\":\"App_app__2ziFi\",\"count\":\"App_count__32WNx\",\"gameOver\":\"App_gameOver__3iCsK\"};"],"sourceRoot":""}